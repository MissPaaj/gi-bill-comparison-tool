<!-- ====================================================================== -->
<!-- == your_school                                                         -->
<!-- == Controls that are used to compute benefits calculations and pertain --> 
<!-- == to the user's schooling.                                            -->
<!--                                                                        -->
<!-- == use_label: true if using labels for these controls.                 --> 
<!-- == advanced: shows advanced search form.                               --> 
<!-- == form_id: the id selector for the form receiving the select event.   --> 
<!-- ====================================================================== -->
<div id="institution-search-form" class="form-group">

  <!-- If on the home form, online is part of the institution search -->
  <!-- It will not appear in the about you section -->
  <% if use_label %>  
    <div id="online-classes-form" class="form-group">
      <label for="online-classes">Will you be taking classes online? </label>

      <select id="online-classes" name="online_classes" alt="Online? Yes/No" class="filter-item">
        <% { 
          'yes' => 'All', 'no' => 'None', 'both' => 'Both online and on-campus'
        }.each_pair do |value, label| %>
          <option value="<%= value %>" 
            <%= 'selected' if value == @inputs[:online_classes] %>
          ><%= label %></option>
        <% end %>
      </select>
    </div>
  <% end %>

	<% if use_label %>
  	<label class="institution-search-label" for="institution-search">
  		Enter a school or employer name to search:
  	</label>
  <% end %>

  <div class="usa-search usa-search-big extra">
    <div role="search">
      <input id="institution-search" name="institution_search" 
      	placeholder="Search by School or Employer Name" 
      	title="Enter school/employer name"
        type="search" 
      />
      <%= submit_tag 'Search Schools', id: "search-button", :class => "usa-search-submit-text" %>
    </div>
  </div>
<!-- Commenting out for now -->
<!--   <% if advanced %>    -->   	    
<!--    <div>               -->          
<!--      <a href="#advancedsearch">Advanced search</a> -->        
<!--    </div>              -->      
<!--   <% end %>           -->    

</div>


<script>
$(document).ready(function() {
  /////////////////////////////////////////////////////////////////////////////
  // Institution autocomplete
  /////////////////////////////////////////////////////////////////////////////
  $('#institution-search').autocomplete({
    minLength : 3,
    source: "<%= autocomplete_path(:json) %>",
    select: function(event, ui) {
      event.preventDefault();
      $("#institution-search").val(ui.item.value);
      $('<%= form_id %>').submit();
    },
    //focus: function(event, ui) {
      //event.preventDefault();
      // $("#institution-search").val(ui.item.label);
    //}
  });

  $('#institution-search').keypress(function(e) { 
    if ((e.keyCode == 13 || e.which == 13) && !$(this).val()) {
     	e.preventDefault();
     }
  });

  $("#search-button").click(function(e) {
    if (!$('#institution-search').val()) {
      e.preventDefault();
    }
  });
});
</script>